/*!
 * ImgPreviewer v2.0.6
 * https://github.com/yue1123/img-previewer
 *
 * Copyright 2021-present dh
 * Released under the MIT license
 *
 * Date: 2022-03-16T13:41:44.039Z
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ImgPreviewer=t()}(this,(function(){"use strict";function e(e){e.preventDefault()}function t(e,t){var i=n(e),r=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight;return 0!==i.width&&0!==i.height&&(!(i.right<0||i.bottom<0||i.left>r||i.top>a)&&function(e,t){if(!e)return!1;for(;t--&&e;){var n=getComputedStyle(e),i=n.visibility,r=n.height,a=n.opacity,o=n.width;if("hidden"===i||"0px"===r||"0px"===o||"0"===a)return!1;e=null==e?void 0:e.parentElement}return!0}(e,t))}function n(e){return e.getBoundingClientRect()}function i(e,t){for(var n in t)e.style[n]=t[n]}function r(e,t){for(var n in t)e.style.setProperty(n,t[n])}var a={en:{RESET:"reset",ROTATE_LEFT:"rotate left",ROTATE_RIGHT:"rotate right",CLOSE:"close",NEXT:"next",PREV:"prev"},zh:{RESET:"重置",ROTATE_LEFT:"向左选择",ROTATE_RIGHT:"向右选装",CLOSE:"关闭",NEXT:"下一张",PREV:"上一张"}},o={fillRatio:.8,imageZoom:{min:1,max:5,step:.1},style:{modalOpacity:.6,headerOpacity:0,zIndex:99},dataUrlKey:"src",bubblingLevel:0};return function l(d,c){if("object"==typeof window){if(!(this instanceof l))return console.error(new Error("ImgPreviewer is a constructor and should be called with the `new` keyword"));if(!d)return console.error(new Error("ImgPreviewer plugin should css string selector that on first params,like #el,.el"));if(!document.querySelector(d))return console.error(new Error("selector "+d+" is invalid"));var s,m=null,u={rootEl:null,container:null,imgList:[],currentImgElement:null,totalIndex:0,index:0,width:0,height:0,startX:0,startY:0,endX:0,endY:0,scale:0,_scale:0,rotate:0,currentClickEl:null},g=!1,p=!1,h=!1;!function(e,t){t?(t.imageZoom=Object.assign({},o.imageZoom,t.imageZoom||{}),t.style=Object.assign({},o.style,t.style||{}),s=Object.assign({},o,t)):s=o;var n=document.querySelector(e);T(u,"index",0,b),T(u,"totalIndex",0,I),X(),f(n),u.currentImgElement=document.querySelector("#J_current-index img"),u.rootEl=n,A()}(d,c),l.prototype.getTotalIndex=function(){return u.totalIndex-1},l.prototype.update=A,l.prototype.show=C,l.prototype.next=function(){if(!g)return C(0);x()},l.prototype.prev=function(){if(!g)return C(u.totalIndex-1);y()},l.prototype.version="2.1.6"}function f(t){var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent),r=document.getElementById("J_content-wrapper");if(null==t||t.addEventListener("click",(function(e){var t=e.target;t!==u.currentImgElement&&"img"===t.localName&&(u.currentClickEl=t,u.index=Number(t.dataset.index),L(t,E(u.imgList[u.index])))}),!1),document.getElementById("J_header-buttons").addEventListener("click",(function(e){var t=window.event||e,n=(t.path||t.composedPath&&t.composedPath()).find((function(e){return"button"===e.localName}));n&&!n.disabled&&v(n.dataset.action)})),document.addEventListener("keyup",(function(e){return v(e.key)})),null==r||r.addEventListener("wheel",(function(t){if(e(t),"img"===t.target.localName){h=!0;var n=s.imageZoom,i=n.min,r=n.max,a=n.step,o=u._scale+r;if(t.wheelDelta>0){var l=a+u.scale;u.scale=l>o?o:l}else{l=u.scale-a;u.scale=l<i?i:l}u.currentImgElement.style.setProperty("--scale","".concat(u.scale.toFixed(2)))}})),null==r||r.addEventListener("click",(function(e){e.target===document.getElementById("J_current-index")&&v("close")})),n){!function(e){var t={scale:1};null==e||e.addEventListener("touchstart",(function(e){if("img"===e.target.localName){e.preventDefault();var n=e.touches,i=n[0],r=n[1];t.pageX=i.pageX,t.pageY=i.pageY,t.movable=!0,r&&(t.pageX2=r.pageX,t.pageY2=r.pageY),t.originScale=t.scale||1}})),document.addEventListener("touchmove",(function(e){if(t.movable){e.preventDefault(),u.currentImgElement.classList.add("moving");var n=e.touches,i=n[0],r=n[1];if(r){t.pageX2||(t.pageX2=r.pageX),t.pageY2||(t.pageY2=r.pageY);var a=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},o=a({x:i.pageX,y:i.pageY},{x:r.pageX,y:r.pageY})/a({x:t.pageX,y:t.pageY},{x:t.pageX2,y:t.pageY2}),l=t.originScale*o;l>s.zoom.max&&(l=s.zoom.max),t.scale=l,u.currentImgElement.style.setProperty("--scale","".concat(l.toFixed(2)))}}})),document.addEventListener("touchend",(function(){t.movable=!1,u.currentImgElement.classList.remove("moving"),delete t.pageX2,delete t.pageY2})),document.addEventListener("touchcancel",(function(){t.movable=!1,u.currentImgElement.classList.remove("moving"),delete t.pageX2,delete t.pageY2}))}(r);var a=0;document.documentElement.addEventListener("touchend",(function(e){var t=Date.now();t-a<=300&&e.preventDefault(),a=t}),!1)}null==r||r.addEventListener("mousedown",(function(e){if("img"===e.target.localName&&h){var t=e.clientX-e.target.offsetLeft,n=e.clientY-e.target.offsetTop;e.preventDefault(),u.currentImgElement.classList.add("moving"),r.onmousemove=function(e){var r=e.clientX-t,a=e.clientY-n;i(u.currentImgElement,{top:"".concat(a,"px"),left:"".concat(r,"px")})},r.onmouseup=function(){this.onmousemove=null,u.currentImgElement.classList.remove("moving")},r.onmouseout=function(){this.onmousemove=null,u.currentImgElement.classList.remove("moving")}}}));var o,l,d,c=(o=function(){g&&w(window.innerWidth,window.innerHeight,!1)},l=100,d=0,function(e){clearTimeout(d),d=window.setTimeout((function(){o(e),clearTimeout(d)}),l)});window.addEventListener("resize",c)}function v(e){switch(e){case"close":case"Escape":!function(){if(g=!1,h=!1,document.ondragstart=null,document.ondragend=null,t(u.currentClickEl,s.bubblingLevel)){var e=n(u.currentClickEl),i=e.top,r=e.left,a=e.width,o=e.height;m.classList.remove("show"),m.classList.add("hide"),u.currentImgElement.style.cssText="width:".concat(a,"px;height:").concat(o,"px;position: fixed; top: ").concat(i,"px; left: ").concat(r,"px;"),u.currentImgElement.addEventListener("transitionend",(function(){m.style.display="none",u.currentImgElement.src="",u.currentImgElement.style.cssText=""}),{once:!0})}else m.classList.remove("show"),m.classList.add("hide"),u.currentImgElement.classList.add("img-pre__animated"),u.currentImgElement.addEventListener("animationend",(function(){m.style.display="none",u.currentImgElement.src="",u.currentImgElement.style.cssText="",u.currentImgElement.classList.remove("img-pre__animated")}),{once:!0});s.onHide&&s.onHide()}();break;case"rotateLeft":u.rotate-=90,r(u.currentImgElement,{"--rotate":"".concat(u.rotate,"deg")});break;case"rotateRight":u.rotate+=90,r(u.currentImgElement,{"--rotate":"".concat(u.rotate,"deg")});break;case"reset":h=!1,w(window.innerWidth,window.innerHeight,!0);break;case"next":case"ArrowRight":x();break;case"prev":case"ArrowLeft":y()}}function w(e,t,n){var a,l,d,c,m,g,p;u.endX=e/2-u.width/2-u.startX,u.endY=t/2-u.height/2-u.startY,u.scale=u._scale=(a=e,l=u.width,d=t,c=u.height,m=s.fillRatio||o.fillRatio,(g=a*m/l)>(p=d*m/c)?p:g),n&&(u.rotate=0,r(u.currentImgElement,{"--rotate":"0"})),i(u.currentImgElement,{top:"".concat(u.startY,"px"),left:"".concat(u.startX-1,"px"),width:"".concat(u.width,"px"),height:"".concat(u.height,"px")}),r(u.currentImgElement,{"--offsetX":"".concat(u.endX,"px"),"--offsetY":"".concat(u.endY,"px"),"--scale":"".concat(u.scale)})}function E(e){return s.dataUrlKey&&e.getAttribute(s.dataUrlKey)||e.src}function x(e){if(u.index!==u.totalIndex-1&&!p){p=!0;var t=e||u.index+1,n=document.createElement("div"),i=document.getElementById("J_content-wrapper"),r=document.createElement("img"),a=document.querySelector("#J_current-index"),o=u.imgList[t],l=E(o);r.src=l,u.index=t,u.width=o.width,u.height=o.height,u.currentImgElement=r,w(window.innerWidth,window.innerHeight,!0),n.appendChild(r),n.classList.add("img-pre__img-item","slide-left-in"),_(n,l),i.appendChild(n),a.classList.add("slide-left-out"),a.addEventListener("animationend",(function(){p=!1,a&&i.removeChild(a)})),n.addEventListener("animationend",(function(){n.classList.remove("slide-left-in"),n.classList.add("current-index"),n.id="J_current-index",u.currentClickEl=o}),{once:!0})}}function y(e){if(0!==u.index&&!p){p=!0;var t=e||u.index-1,n=document.createElement("div"),i=document.createElement("img"),r=document.getElementById("J_content-wrapper"),a=document.querySelector("#J_current-index"),o=u.imgList[t],l=E(o);i.src=l,u.index=t,u.width=o.width,u.height=o.height,u.currentImgElement=i,w(window.innerWidth,window.innerHeight,!0),n.appendChild(i),n.classList.add("img-pre__img-item","slide-right-in"),_(n,l),r.appendChild(n),a.classList.add("slide-right-out"),a.addEventListener("animationend",(function(){p=!1,a&&r.removeChild(a)})),n.addEventListener("animationend",(function(){n.classList.remove("slide-right-in"),n.classList.add("current-index"),n.id="J_current-index",u.currentClickEl=o}),{once:!0})}}function _(e,t){var n=new Image;n.src=t;var i=setTimeout((function(){null==e||e.classList.add("loading")}),32);n.onload=function(){var e;i&&clearTimeout(i),n=null,null===(e=document.getElementById("J_current-index"))||void 0===e||e.classList.remove("loading")}}function L(t,i){g=!0,m.style.display="block",document.ondragstart=e,document.ondragend=e,_(document.getElementById("J_current-index"),i);var r=n(t),a=r.width,o=r.height,l=r.x,d=r.y;requestAnimationFrame((function(){u.currentImgElement.src=i,m.classList.remove("hide","fadeout"),m.classList.add("show"),u.width=a,u.height=o,u.startX=l,u.startY=d,w(window.innerWidth,window.innerHeight,!0),s.onShow&&s.onShow()}))}function b(e){document.getElementById("img-pre__current-index").innerText=String(e+1);var t=document.getElementById("J-img-pre__prev"),n=document.getElementById("J-img-pre__next");t.disabled=0===e,n.disabled=e===u.totalIndex-1}function I(e){document.getElementById("img-pre__total-index").innerText=String(e)}function T(e,t,n,i){Object.defineProperty(e,t,{enumerable:!1,set:function(e){i(n=e)},get:function(){return n}})}function X(){var e=document.getElementById("image-preview-container"),t=s.style,n=t.modalOpacity,i=t.headerOpacity,r=t.zIndex;e?m=e:((m=document.createElement("div")).classList.add("img-pre__container","img-pre__animated"),m.id="J_container",m.style.setProperty("--container-opacity",String(n)),m.style.setProperty("--header-bg-opacity",String(i)),m.style.setProperty("--container-zIndex",String(r)),m.innerHTML=function(e,t){return e.replace(/{{(.*?)}}/g,(function(e,n){return t[n]}))}('\n    <div class="img-pre__header img-pre__animated"> \n        <div class="img-pre__nums"> \n            <p>\n                <span id="img-pre__current-index"></span>\n                <span class="img-pre__nums-delimiter">/</span>\n                <span id="img-pre__total-index"></span>\n            </p>\n        </div>\n            <div class="img-pre__buttons" id="J_header-buttons"> \n                <button class="img-pre__button-item" data-action="reset" data-tooltip="{{RESET}}"> \n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-view-list" viewBox="0 0 16 16" > <path d="M3 4.5h10a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1H3zM1 2a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 2zm0 12a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 14z" /> </svg> \n                </button> \n                <button class="img-pre__button-item" data-action="rotateLeft" data-tooltip="{{ROTATE_LEFT}}">\n                    <svg t="1639647288997" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1423" width="16" height="16" > <path d="M725.996 383.57H74.558A74.782 74.782 0 0 0 0 458.126v491.315A74.782 74.782 0 0 0 74.558 1024h651.438a74.782 74.782 0 0 0 74.558-74.558V458.127a74.782 74.782 0 0 0-74.558-74.558z m10.528 565.872a10.816 10.816 0 0 1-10.528 10.528H74.558a10.816 10.816 0 0 1-10.528-10.528V458.127c0-5.6 4.928-10.528 10.528-10.528h651.438c5.6 0 10.528 4.928 10.528 10.528v491.315z" p-id="1424" fill="#ffffff" ></path> <path d="M1023.94 533.165C986.117 355.73 849.93 202.038 668.558 132.088a592.112 592.112 0 0 0-234.33-39.551l36.511-38.463A32 32 0 1 0 424.341 9.98l-96.094 101.15a32 32 0 0 0 1.184 45.278l96.062 90.974a31.935 31.935 0 0 0 45.246-1.248 32 32 0 0 0-1.216-45.279l-46.75-44.319a529.17 529.17 0 0 1 222.746 35.231c161.403 62.239 282.392 198.139 315.703 354.647a32.063 32.063 0 0 0 62.718-13.248z" p-id="1425" fill="#ffffff" ></path> </svg> \n                </button>\n                <button class="img-pre__button-item" data-action="rotateRight" data-tooltip="{{ROTATE_RIGHT}}">\n                    <svg t="1639647310917" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1652" width="16" height="16" > <path d="M0.69753 525.673495a31.720891 31.720891 0 0 0 25.581364 37.860419 32.744146 32.744146 0 0 0 38.372045-23.534855 502.929616 502.929616 0 0 1 320.790305-350.464687A557.673735 557.673735 0 0 1 611.580501 154.23209l-48.092964 44.511573a28.1395 28.1395 0 0 0-10.232546 21.999973 31.209264 31.209264 0 0 0 8.697664 22.511601 33.255773 33.255773 0 0 0 46.046455 0L706.231548 154.23209a32.744146 32.744146 0 0 0 10.232546-21.999973 31.720891 31.720891 0 0 0-9.209291-22.5116L609.533992 10.464824a33.255773 33.255773 0 0 0-31.209264-9.720918 32.232519 32.232519 0 0 0-23.534855 21.488346A31.209264 31.209264 0 0 0 563.487537 51.906634l37.348791 37.860419a626.743417 626.743417 0 0 0-237.906685 38.883673 566.883026 566.883026 0 0 0-358.139095 394.97626z m269.115949 420.045996a11.767427 11.767427 0 0 0 10.744172 10.744173h665.115464a10.744173 10.744173 0 0 0 10.744173-10.744173V435.627094a10.744173 10.744173 0 0 0-10.744173-10.744173h-665.115464a11.2558 11.2558 0 0 0-10.744172 10.744173v511.627279zM281.069279 358.883002h665.115463A77.255719 77.255719 0 0 1 1023.952089 435.627094v511.627279a76.744092 76.744092 0 0 1-77.25572 76.744092h-665.115463A76.744092 76.744092 0 0 1 205.348441 945.719491V435.627094A77.255719 77.255719 0 0 1 281.069279 358.883002z" p-id="1653" fill="#ffffff" ></path> </svg> \n                </button>\n                <button class="img-pre__button-item" data-action="close" data-tooltip="{{CLOSE}}">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16" > <path fill-rule="evenodd" d="M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z" /> <path fill-rule="evenodd" d="M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z" /> </svg> </button> <button id="J-img-pre__prev" data-action="prev" data-tooltip="{{PREV}}"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/> </svg> </button> <button id="J-img-pre__next" data-action="next" data-tooltip="{{NEXT}}"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16"> <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/> </svg> \n                </button>                    \n            </div>\n        </div>\n    </div>        \n    <div class="img-pre__content-wrapper" id="J_content-wrapper"> \n        <div class="img-pre__img-item img-pre__animated current-index" id="J_current-index"> \n            <img alt="" id="img-pre__image" src="" /> \n        </div>\n    </div>',s.i18n?s.i18n:-1!==window.navigator.language.indexOf("zh")?a.zh:a.en),document.body.appendChild(m))}function A(){var e,t,n,i=u.rootEl.querySelectorAll("img");u.totalIndex=i.length,u.imgList=new Array(u.totalIndex);for(var r=0,a=u.totalIndex;r<a;r++){var o=i[r];e=o,t="index",n=String(r),e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n),u.imgList[r]=o}}function C(e){var t=u.imgList[e];if(u.currentClickEl=t,e<0||e>u.totalIndex-1)throw new Error("invalid index");g?e<u.index?y(e):x(e):L(t,t.src),u.index=e}}}));
